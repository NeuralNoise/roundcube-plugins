(function(h,w){function mb(a,b,d){function e(){setTimeout(function(){!s.start&&0!==h("body")[0].offsetWidth&&f()},0)}function c(a){if(!s||a!=s.name){F++;p();var b=s,d;b?((b.beforeHide||Qa)(),ta(z,z.height()),b.element.hide()):ta(z,1);z.css("overflow","hidden");(s=I[a])?s.element.show():s=I[a]=new ca[a](d=O=h("<div class='fc-view fc-view-"+a+"' style='position:absolute'/>").appendTo(z),v);b&&C.deactivateButton(b.name);C.activateButton(a);f();z.css("overflow","");b&&ta(z,1);d||(s.afterShow||Qa)();F--}}
function f(d){if(0!==x.offsetWidth){F++;p();xa===w&&m();var c=!1;!s.start||d||u<s.start||u>=s.end?(s.render(u,d||0),j(!0),c=!0):s.sizeDirty?(s.clearEvents(),j(),c=!0):s.eventsDirty&&(s.clearEvents(),c=!0);s.sizeDirty=!1;s.eventsDirty=!1;d=c;!b.lazyFetching||k(s.visStart,s.visEnd)?l():d&&t();T=a.outerWidth();C.updateTitle(s.title);d=new Date;d>=s.start&&d<s.end?C.disableButton("today"):C.enableButton("today");F--;s.trigger("viewDisplay",x)}}function i(){r();0!==x.offsetWidth&&(m(),j(),p(),s.clearEvents(),
s.renderEvents(A),s.sizeDirty=!1)}function r(){h.each(I,function(a,b){b.sizeDirty=!0})}function m(){xa=b.contentHeight?b.contentHeight:b.height?b.height-(J?J.height():0)-oa(z):Math.round(z.width()/Math.max(b.aspectRatio,0.5))}function j(a){F++;s.setHeight(xa,a);O&&(O.css("position","relative"),O=null);s.setWidth(z.width(),a);F--}function g(){if(!F)if(s.start){var b=++Q;setTimeout(function(){if(b==Q&&(!F&&0!==x.offsetWidth)&&T!=(T=a.outerWidth()))F++,i(),s.trigger("windowResize",x),F--},200)}else e()}
function l(){o(s.visStart,s.visEnd)}function t(a){M();0!==x.offsetWidth&&(s.clearEvents(),s.renderEvents(A,a),s.eventsDirty=!1)}function M(){h.each(I,function(a,b){b.eventsDirty=!0})}function p(){s&&s.unselect()}var v=this;v.options=b;v.render=function(d){z?(m(),r(),M(),f(d)):(a.addClass("fc"),b.isRTL&&a.addClass("fc-rtl"),b.theme&&a.addClass("ui-widget"),z=h("<div class='fc-content' style='position:relative'/>").prependTo(a),C=new nb(v,b),(J=C.render())&&a.prepend(J),c(b.defaultView),h(window).resize(g),
0!==h("body")[0].offsetWidth||e())};v.destroy=function(){h(window).unbind("resize",g);C.destroy();z.remove();a.removeClass("fc fc-rtl ui-widget")};v.refetchEvents=l;v.reportEvents=function(a){A=a;t()};v.reportEventChange=function(a){t(a)};v.rerenderEvents=t;v.changeView=c;v.select=function(a,b,d){s.select(a,b,d===w?!0:d)};v.unselect=p;v.prev=function(){f(-1)};v.next=function(){f(1)};v.prevYear=function(){ya(u,-1);f()};v.nextYear=function(){ya(u,1);f()};v.today=function(){u=new Date;f()};v.gotoDate=
function(a,b,d){a instanceof Date?u=n(a):Ra(u,a,b,d);f()};v.incrementDate=function(a,b,d){a!==w&&ya(u,a);b!==w&&za(u,b);d!==w&&q(u,d);f()};v.formatDate=function(a,d){return da(a,d,b)};v.formatDates=function(a,d,c){return Aa(a,d,c,b)};v.getDate=function(){return n(u)};v.getView=function(){return s};v.option=function(a,d){if(d===w)return b[a];if("height"==a||"contentHeight"==a||"aspectRatio"==a)b[a]=d,i()};v.trigger=function(a,d){if(b[a])return b[a].apply(d||x,Array.prototype.slice.call(arguments,2))};
ob.call(v,b,d);var k=v.isFetchNeeded,o=v.fetchEvents,x=a[0],C,J,z,s,I={},T,xa,O,Q=0,F=0,u=new Date,A=[],D;Ra(u,b.year,b.month,b.date);b.droppable&&h(document).bind("dragstart",function(a,d){var c=a.target,C=h(c);if(!C.parents(".fc").length){var e=b.dropAccept;if(h.isFunction(e)?e.call(c,C):C.is(e))D=c,s.dragStart(D,a,d)}}).bind("dragstop",function(a,b){D&&(s.dragStop(D,a,b),D=null)})}function nb(a,b){function d(d){var e=h("<td class='fc-header-"+d+"'/>");(d=b.header[d])&&h.each(d.split(" "),function(d){0<
d&&e.append("<span class='fc-header-space'/>");var f;h.each(this.split(","),function(d,g){if("title"==g)e.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),f&&f.addClass(c+"-corner-right"),f=null;else{var r;a[g]?r=a[g]:ca[g]&&(r=function(){p.removeClass(c+"-state-hover");a.changeView(g)});if(r){var n=b.theme?Ba(b.buttonIcons,g):null,q=Ba(b.buttonText,g),p=h("<span class='fc-button fc-button-"+g+" "+c+"-state-default'><span class='fc-button-inner'><span class='fc-button-content'>"+(n?
"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+n+"'/></span>":q)+"</span><span class='fc-button-effect'><span></span></span></span></span>");p&&(p.click(function(){p.hasClass(c+"-state-disabled")||r()}).mousedown(function(){p.not("."+c+"-state-active").not("."+c+"-state-disabled").addClass(c+"-state-down")}).mouseup(function(){p.removeClass(c+"-state-down")}).hover(function(){p.not("."+c+"-state-active").not("."+c+"-state-disabled").addClass(c+"-state-hover")},function(){p.removeClass(c+
"-state-hover").removeClass(c+"-state-down")}).appendTo(e),f||p.addClass(c+"-corner-left"),f=p)}}});f&&f.addClass(c+"-corner-right")});return e}this.render=function(){c=b.theme?"ui":"fc";if(b.header)return e=h("<table class='fc-header' style='width:100%'/>").append(h("<tr/>").append(d("left")).append(d("center")).append(d("right")))};this.destroy=function(){e.remove()};this.updateTitle=function(a){e.find("h2").html(a)};this.activateButton=function(a){e.find("span.fc-button-"+a).addClass(c+"-state-active")};
this.deactivateButton=function(a){e.find("span.fc-button-"+a).removeClass(c+"-state-active")};this.disableButton=function(a){e.find("span.fc-button-"+a).addClass(c+"-state-disabled")};this.enableButton=function(a){e.find("span.fc-button-"+a).removeClass(c+"-state-disabled")};var e=h([]),c}function ob(a,b){function d(a,b){e(a,function(d){if(b==p){if(d){for(var c=0;c<d.length;c++)d[c].source=a,f(d[c]);o=o.concat(d)}v--;v||j(o)}})}function e(b,d){var c,f=H.sourceFetchers,g;for(c=0;c<f.length;c++){g=
f[c](b,q,M,d);if(!0===g)return;if("object"==typeof g){e(g,d);return}}if(c=b.events)h.isFunction(c)?(k++||r("loading",null,!0),c(n(q),n(M),function(a){d(a);--k||r("loading",null,!1)})):h.isArray(c)?d(c):d();else if(b.url){var i=b.success,m=b.error,j=b.complete;c=h.extend({},b.data||{});f=fa(b.startParam,a.startParam);g=fa(b.endParam,a.endParam);f&&(c[f]=Math.round(+q/1E3));g&&(c[g]=Math.round(+M/1E3));k++||r("loading",null,!0);h.ajax(h.extend({},pb,b,{data:c,success:function(a){var a=a||[],b=ua(i,
this,arguments);h.isArray(b)&&(a=b);d(a)},error:function(){ua(m,this,arguments);d()},complete:function(){ua(j,this,arguments);--k||r("loading",null,!1)}}))}else d()}function c(a){h.isFunction(a)||h.isArray(a)?a={events:a}:"string"==typeof a&&(a={url:a});if("object"==typeof a){var b=a;b.className?"string"==typeof b.className&&(b.className=b.className.split(/\s+/)):b.className=[];for(var d=H.sourceNormalizers,c=0;c<d.length;c++)d[c](b);l.push(a);return a}}function f(b){var d=b.source||{},c=fa(d.ignoreTimezone,
a.ignoreTimezone);b._id=b._id||(b.id===w?"_fc"+qb++:b.id+"");b.date&&(b.start||(b.start=b.date),delete b.date);b._start=n(b.start=Ca(b.start,c));b.end=Ca(b.end,c);b.end&&b.end<=b.start&&(b.end=null);b._end=b.end?n(b.end):null;b.allDay===w&&(b.allDay=fa(d.allDayDefault,a.allDayDefault));b.className?"string"==typeof b.className&&(b.className=b.className.split(/\s+/)):b.className=[]}function i(a){return("object"==typeof a?a.events||a.url:"")||a}this.isFetchNeeded=function(a,b){return!q||a<q||b>M};this.fetchEvents=
function(a,b){q=a;M=b;o=[];var c=++p,e=l.length;v=e;for(var f=0;f<e;f++)d(l[f],c)};this.addEventSource=function(a){if(a=c(a))v++,d(a,p)};this.removeEventSource=function(a){l=h.grep(l,function(b){return!(b&&a&&i(b)==i(a))});o=h.grep(o,function(b){return!(b.source&&a&&i(b.source)==i(a))});j(o)};this.updateEvent=function(a){var b,d=o.length,c,e=m().defaultEventEnd,g=a.start-a._start,i=a.end?a.end-(a._end||e(a)):0;for(b=0;b<d;b++)c=o[b],c._id==a._id&&c!=a&&(c.start=new Date(+c.start+g),c.end=a.end?c.end?
new Date(+c.end+i):new Date(+e(c)+i):null,c.title=a.title,c.url=a.url,c.allDay=a.allDay,c.className=a.className,c.editable=a.editable,c.color=a.color,c.backgroudColor=a.backgroudColor,c.borderColor=a.borderColor,c.textColor=a.textColor,f(c));f(a);j(o)};this.renderEvent=function(a,b){f(a);a.source||(b&&(g.events.push(a),a.source=g),o.push(a));j(o)};this.removeEvents=function(a){if(a){if(!h.isFunction(a))var b=a+"",a=function(a){return a._id==b};o=h.grep(o,a,!0);for(d=0;d<l.length;d++)h.isArray(l[d].events)&&
(l[d].events=h.grep(l[d].events,a,!0))}else{o=[];for(var d=0;d<l.length;d++)h.isArray(l[d].events)&&(l[d].events=[])}j(o)};this.clientEvents=function(a){return h.isFunction(a)?h.grep(o,a):a?(a+="",h.grep(o,function(b){return b._id==a})):o};this.normalizeEvent=f;for(var r=this.trigger,m=this.getView,j=this.reportEvents,g={events:[]},l=[g],q,M,p=0,v=0,k=0,o=[],x=0;x<b.length;x++)c(b[x])}function ya(a,b,d){a.setFullYear(a.getFullYear()+b);d||ia(a);return a}function za(a,b,d){if(+a){var b=a.getMonth()+
b,e=n(a);e.setDate(1);e.setMonth(b);a.setMonth(b);for(d||ia(a);a.getMonth()!=e.getMonth();)a.setDate(a.getDate()+(a<e?1:-1))}return a}function q(a,b,d){if(+a){var b=a.getDate()+b,e=n(a);e.setHours(9);e.setDate(b);a.setDate(b);d||ia(a);Da(a,e)}return a}function Da(a,b){if(+a)for(;a.getDate()!=b.getDate();)a.setTime(+a+(a<b?1:-1)*rb)}function E(a,b){a.setMinutes(a.getMinutes()+b);return a}function ia(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function n(a,b){return b?
ia(new Date(+a)):new Date(+a)}function Sa(){var a=0,b;do b=new Date(1970,a++,1);while(b.getHours());return b}function W(a,b,d){for(b=b||1;!a.getDay()||d&&1==a.getDay()||!d&&6==a.getDay();)q(a,b);return a}function $(a,b){return Math.round((n(a,!0)-n(b,!0))/Ta)}function Ra(a,b,d,e){b!==w&&b!=a.getFullYear()&&(a.setDate(1),a.setMonth(0),a.setFullYear(b));d!==w&&d!=a.getMonth()&&(a.setDate(1),a.setMonth(d));e!==w&&a.setDate(e)}function Ca(a,b){if("object"==typeof a)return a;if("number"==typeof a)return new Date(1E3*
a);if("string"==typeof a){if(a.match(/^\d+(\.\d+)?$/))return new Date(1E3*parseFloat(a));b===w&&(b=!0);return Ua(a,b)||(a?new Date(a):null)}return null}function Ua(a,b){var d=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!d)return null;var e=new Date(d[1],0,1);if(b||!d[14]){var c=new Date(d[1],0,1,9,0);d[3]&&(e.setMonth(d[3]-1),c.setMonth(d[3]-1));d[5]&&(e.setDate(d[5]),c.setDate(d[5]));Da(e,c);d[7]&&
e.setHours(d[7]);d[8]&&e.setMinutes(d[8]);d[10]&&e.setSeconds(d[10]);d[12]&&e.setMilliseconds(1E3*Number("0."+d[12]));Da(e,c)}else e.setUTCFullYear(d[1],d[3]?d[3]-1:0,d[5]||1),e.setUTCHours(d[7]||0,d[8]||0,d[10]||0,d[12]?1E3*Number("0."+d[12]):0),c=60*Number(d[16])+(d[18]?Number(d[18]):0),c*="-"==d[15]?1:-1,e=new Date(+e+6E4*c);return e}function Ea(a){if("number"==typeof a)return 60*a;if("object"==typeof a)return 60*a.getHours()+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var b=parseInt(a[1],
10);a[3]&&(b%=12,"p"==a[3].toLowerCase().charAt(0)&&(b+=12));return 60*b+(a[2]?parseInt(a[2],10):0)}}function da(a,b,d){return Aa(a,null,b,d)}function Aa(a,b,d,e){var e=e||pa,c=a,f=b,i,h=d.length,m,j,g,l="";for(i=0;i<h;i++)if(m=d.charAt(i),"'"==m)for(j=i+1;j<h;j++){if("'"==d.charAt(j)){c&&(l=j==i+1?l+"'":l+d.substring(i+1,j),i=j);break}}else if("("==m)for(j=i+1;j<h;j++){if(")"==d.charAt(j)){i=da(c,d.substring(i+1,j),e);parseInt(i.replace(/\D/,""),10)&&(l+=i);i=j;break}}else if("["==m)for(j=i+1;j<
h;j++){if("]"==d.charAt(j)){m=d.substring(i+1,j);i=da(c,m,e);i!=da(f,m,e)&&(l+=i);i=j;break}}else if("{"==m)c=b,f=a;else if("}"==m)c=a,f=b;else{for(j=h;j>i;j--)if(g=sb[d.substring(i,j)]){c&&(l+=g(c,e));i=j-1;break}j==i&&c&&(l+=m)}return l}function qa(a){if(a.end){var b=a.end,a=a.allDay,b=n(b);return a||b.getHours()||b.getMinutes()?q(b,1):ia(b)}return q(n(a.start),1)}function tb(a,b){return 100*(b.msLength-a.msLength)+(a.event.start-b.event.start)}function Fa(a,b,d,e){var c=[],f,i=a.length,h,m,j,g,
l;for(f=0;f<i;f++)if(h=a[f],m=h.start,j=b[f],j>d&&m<e)m<d?(m=n(d),g=!1):g=!0,j>e?(j=n(e),l=!1):l=!0,c.push({event:h,start:m,end:j,isStart:g,isEnd:l,msLength:j-m});return c.sort(tb)}function Ga(a){var b=[],d,e=a.length,c,f,i,h;for(d=0;d<e;d++){c=a[d];for(f=0;;){i=!1;if(b[f])for(h=0;h<b[f].length;h++)if(b[f][h].end>c.start&&b[f][h].start<c.end){i=!0;break}if(i)f++;else break}b[f]?b[f].push(c):b[f]=[c]}return b}function Va(a,b,d){a.unbind("mouseover").mouseover(function(a){for(var c=a.target,f;c!=this;)f=
c,c=c.parentNode;if((c=f._fci)!==w)f._fci=w,f=b[c],d(f.event,f.element,f),h(a.target).trigger(a);a.stopPropagation()})}function ra(a,b,d){for(var e=0,c;e<a.length;e++)c=h(a[e]),c.width(Math.max(0,b-(Ha(c)+Ia(c)+(d?Ja(c):0))))}function Wa(a,b,d){for(var e=0,c;e<a.length;e++)c=h(a[e]),c.height(Math.max(0,b-oa(c,d)))}function Ha(a){return(parseFloat(h.curCSS(a[0],"paddingLeft",!0))||0)+(parseFloat(h.curCSS(a[0],"paddingRight",!0))||0)}function Ja(a){return(parseFloat(h.curCSS(a[0],"marginLeft",!0))||
0)+(parseFloat(h.curCSS(a[0],"marginRight",!0))||0)}function Ia(a){return(parseFloat(h.curCSS(a[0],"borderLeftWidth",!0))||0)+(parseFloat(h.curCSS(a[0],"borderRightWidth",!0))||0)}function oa(a,b){return(parseFloat(h.curCSS(a[0],"paddingTop",!0))||0)+(parseFloat(h.curCSS(a[0],"paddingBottom",!0))||0)+((parseFloat(h.curCSS(a[0],"borderTopWidth",!0))||0)+(parseFloat(h.curCSS(a[0],"borderBottomWidth",!0))||0))+(b?Xa(a):0)}function Xa(a){return(parseFloat(h.curCSS(a[0],"marginTop",!0))||0)+(parseFloat(h.curCSS(a[0],
"marginBottom",!0))||0)}function ta(a,b){b="number"==typeof b?b+"px":b;a.each(function(a,e){e.style.cssText+=";min-height:"+b+";_height:"+b})}function Qa(){}function Ya(a,b){return a-b}function ea(a){return(10>a?"0":"")+a}function Ba(a,b){if(a[b]!==w)return a[b];for(var d=b.split(/(?=[A-Z])/),e=d.length-1,c;0<=e;e--)if(c=a[d[e].toLowerCase()],c!==w)return c;return a[""]}function U(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,
"<br />")}function Za(a){return a.id+"/"+a.className+"/"+a.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function Ka(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function va(a){a.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function La(a,b){a.each(function(a,e){e.className=e.className.replace(/^fc-\w*/,"fc-"+ub[b.getDay()])})}
function $a(a,b){var d=a.source||{},e=a.color,c=d.color,f=b("eventColor"),h=a.backgroundColor||e||d.backgroundColor||c||b("eventBackgroundColor")||f,e=a.borderColor||e||d.borderColor||c||b("eventBorderColor")||f,d=a.textColor||d.textColor||b("eventTextColor"),c=[];h&&c.push("background-color:"+h);e&&c.push("border-color:"+e);d&&c.push("color:"+d);return c.join(";")}function ua(a,b,d){h.isFunction(a)&&(a=[a]);if(a){var e,c;for(e=0;e<a.length;e++)c=a[e].apply(b,d)||c;return c}}function fa(){for(var a=
0;a<arguments.length;a++)if(arguments[a]!==w)return arguments[a]}function Ma(a,b,d){function e(a){if(!l("selectable")){var b=parseInt(this.className.match(/fc\-day(\d+)/)[1]),b=m(b);t("dayClick",this,b,!0,a)}}function c(a,b,d){d&&D.build();for(var d=n(g.visStart),c=q(n(d),A),h=0;h<u;h++){var V=new Date(Math.max(d,a)),i=new Date(Math.min(c,b));if(V<i){var P;G?(P=$(i,d)*y+R+1,V=$(V,d)*y+R+1):(P=$(V,d),V=$(i,d));f(h,P,h,V-1).click(e).mousedown(k)}q(d,7);q(c,7)}}function f(b,d,c,e){b=D.rect(b,d,c,e,a);
return p(b,a)}function i(a){return{row:Math.floor($(a,g.visStart)/7),col:j(a.getDay())}}function r(a){return q(n(g.visStart),7*a.row+a.col*y+R)}function m(a){return q(n(g.visStart),7*Math.floor(a/A)+a%A*y+R)}function j(a){return(a-Math.max(L,V)+A)%A*y+R}var g=this;g.renderBasic=function(b,d,c,f){u=d;A=c;(G=l("isRTL"))?(y=-1,R=A-1):(y=1,R=0);L=l("firstDay");V=l("weekends")?0:1;P=l("theme")?"ui":"fc";aa=l("columnFormat");if(d=!J){var i=P+"-widget-header",j=P+"-widget-content",r,c="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>";
for(r=0;r<A;r++)c+="<th class='fc- "+i+"'/>";c+="</tr></thead><tbody>";for(r=0;r<b;r++){c+="<tr class='fc-week"+r+"'>";for(i=0;i<A;i++)c+="<td class='fc- "+j+" fc-day"+(r*A+i)+"'><div>"+(f?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";c+="</tr>"}b=h(c+"</tbody></table>").appendTo(a);x=b.find("thead");C=x.find("th");J=b.find("tbody");z=J.find("tr");s=J.find("td");I=s.filter(":first-child");T=z.eq(0).find("div.fc-day-content div");
va(x.add(x.find("tr")));va(z);z.eq(0).addClass("fc-first");s.click(e).mousedown(k);w=h("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a)}else M();var n=d||1==u,N=g.start.getMonth(),v=ia(new Date),q,p,t;n&&C.each(function(a,b){q=h(b);p=m(a);q.html(o(p,aa));La(q,p)});s.each(function(a,b){q=h(b);p=m(a);p.getMonth()==N?q.removeClass("fc-other-month"):q.addClass("fc-other-month");+p==+v?q.addClass(P+"-state-highlight fc-today"):q.removeClass(P+"-state-highlight fc-today");q.find("div.fc-day-number").text(p.getDate());
n&&La(q,p)});z.each(function(a,b){t=h(b);if(a<u){t.show();a==u-1?t.addClass("fc-last"):t.removeClass("fc-last")}else t.hide()})};g.setHeight=function(a){Q=a;var a=Q-x.height(),b,d,c;"variable"==l("weekMode")?b=d=Math.floor(a/(1==u?2:6)):(b=Math.floor(a/u),d=a-b*(u-1));I.each(function(a,e){if(a<u){c=h(e);ta(c.find("> div"),(a==u-1?d:b)-oa(c))}})};g.setWidth=function(a){O=a;N.clear();F=Math.floor(O/A);ra(C.slice(0,-1),F)};g.renderDayOverlay=c;g.defaultSelectionEnd=function(a){return n(a)};g.renderSelection=
function(a,b){c(a,q(n(b),1),!0)};g.clearSelection=function(){v()};g.reportDayClick=function(a,b,d){var c=i(a);t("dayClick",s[c.row*A+c.col],a,b,d)};g.dragStart=function(a,b){E.start(function(a){v();a&&f(a.row,a.col,a.row,a.col)},b)};g.dragStop=function(a,b,d){var c=E.stop();v();c&&(c=r(c),t("drop",a,c,!0,b,d))};g.defaultEventEnd=function(a){return n(a.start)};g.getHoverListener=function(){return E};g.colContentLeft=function(a){return N.left(a)};g.colContentRight=function(a){return N.right(a)};g.dayOfWeekCol=
j;g.dateCell=i;g.cellDate=r;g.cellIsAllDay=function(){return!0};g.allDayRow=function(a){return z.eq(a)};g.allDayBounds=function(){return{left:0,right:O}};g.getRowCnt=function(){return u};g.getColCnt=function(){return A};g.getColWidth=function(){return F};g.getDaySegmentContainer=function(){return w};eb.call(g,a,b,d);fb.call(g);gb.call(g);vb.call(g);var l=g.opt,t=g.trigger,M=g.clearEvents,p=g.renderOverlay,v=g.clearOverlays,k=g.daySelectionMousedown,o=b.formatDate,x,C,J,z,s,I,T,w,O,Q,F,u,A,D,E,N,G,
y,R,L,V,P,aa;Ka(a.addClass("fc-grid"));D=new hb(function(a,b){var d,c,e;C.each(function(a,f){d=h(f);c=d.offset().left;a&&(e[1]=c);e=[c];b[a]=e});e[1]=c+d.outerWidth();z.each(function(b,f){b<u&&(d=h(f),c=d.offset().top,b&&(e[1]=c),e=[c],a[b]=e)});e[1]=c+d.outerHeight()});E=new ib(D);N=new jb(function(a){return T.eq(a)})}function vb(){function a(a){var d=k(),c=o(),e=n(b.visStart),c=q(n(e),c),f=h.map(a,qa),g,i,m,j,r,x,l=[];for(g=0;g<d;g++){i=Ga(Fa(a,f,e,c));for(m=0;m<i.length;m++){j=i[m];for(r=0;r<j.length;r++)x=
j[r],x.row=g,x.level=m,l.push(x)}q(e,7);q(c,7)}return l}var b=this;b.renderEvents=function(b,d){i(b);x(a(b),d)};b.compileDaySegs=a;b.clearEvents=function(){r();t().empty()};b.bindDaySeg=function(a,b,i){if(c(a)){var h=w(),r;b.draggable({zIndex:9,delay:50,opacity:d("dragOpacity"),revertDuration:d("dragRevertDuration"),start:function(c,f){e("eventDragStart",b,a,c,f);g(a,b);h.start(function(c,e,f,g){b.draggable("option","revert",!c||!f&&!g);v();c?(r=7*f+g*(d("isRTL")?-1:1),p(q(n(a.start),r),q(qa(a),r))):
r=0},c,"drag")},stop:function(d,c){h.stop();v();e("eventDragStop",b,a,d,c);r?l(this,a,r,0,a.allDay,d,c):(b.css("filter",""),j(a,b))}})}i.isEnd&&f(a)&&C(a,b,i);m(a,b)};kb.call(b);var d=b.opt,e=b.trigger,c=b.isEventDraggable,f=b.isEventResizable,i=b.reportEvents,r=b.reportEventClear,m=b.eventElementHandlers,j=b.showEvents,g=b.hideEvents,l=b.eventDrop,t=b.getDaySegmentContainer,w=b.getHoverListener,p=b.renderDayOverlay,v=b.clearOverlays,k=b.getRowCnt,o=b.getColCnt,x=b.renderDaySegs,C=b.resizableDayEvent}
function lb(a,b,d){function e(a){if(!o("selectable")){var b=Math.min(K-1,Math.floor((a.pageX-Q.offset().left-X)/wa)),d=m(b),c=this.parentNode.className.match(/fc-slot(\d+)/);c?(c=parseInt(c[1])*o("slotMinutes"),d.setHours(Math.floor(c/60)),d.setMinutes(c%60+ka),x("dayClick",D[b],d,!1,a)):x("dayClick",D[b],d,!0,a)}}function c(a,b,d){d&&Y.build();var c=n(k.visStart);ea?(d=$(b,c)*ga+ha+1,a=$(a,c)*ga+ha+1):(d=$(a,c),a=$(b,c));d=Math.max(0,d);a=Math.min(K,a);d<a&&f(0,d,0,a-1).click(e).mousedown(T)}function f(a,
b,d,c){a=Y.rect(a,b,d,c,y);return J(a,y)}function i(a,b){for(var d=n(k.visStart),c=q(n(d),1),f=0;f<K;f++){var g=new Date(Math.max(d,a)),i=new Date(Math.min(c,b));if(g<i){var h=f*ga+ha,h=Y.rect(0,h,0,h,aa),g=l(d,g),i=l(d,i);h.top=g;h.height=i-g;J(h,aa).click(e).mousedown(p)}q(d,1);q(c,1)}}function r(a){var b=m(a.col),a=a.row;o("allDaySlot")&&a--;0<=a&&E(b,ka+a*o("slotMinutes"));return b}function m(a){return q(n(k.visStart),a*ga+ha)}function j(a){return o("allDaySlot")&&!a.row}function g(a){return(a-
Math.max(ca,da)+K)%K*ga+ha}function l(a,b){a=n(a,!0);if(b<E(n(a),ka))return 0;if(b>=E(n(a),U))return ja.height();var d=o("slotMinutes"),c=60*b.getHours()+b.getMinutes()-ka,e=Math.floor(c/d),f=Pa[e];f===w&&(f=Pa[e]=ja.find("tr:eq("+e+") td div")[0].offsetTop);return Math.max(0,Math.round(f-1+S*(c%d/d)))}function t(a,b){var d=o("selectHelper");Y.build();if(d){var c=$(a,k.visStart)*ga+ha;if(0<=c&&c<K){var c=Y.rect(0,c,0,c,aa),f=l(a,a),g=l(a,b);if(g>f){c.top=f;c.height=g-f;c.left+=2;c.width-=5;if(h.isFunction(d)){if(d=
d(a,b))c.position="absolute",c.zIndex=8,ba=h(d).css(c).appendTo(aa)}else c.isStart=!0,c.isEnd=!0,ba=h(H({title:"",start:a,end:b,className:["fc-select-helper"],editable:!1},c)),ba.css("opacity",o("dragOpacity"));ba&&(ba.click(e).mousedown(p),aa.append(ba),ra(ba,c.width,!0),Wa(ba,c.height,!0))}}}else i(a,b)}function M(){z();ba&&(ba.remove(),ba=null)}function p(a){if(1==a.which&&o("selectable")){I(a);var b;na.start(function(a,d){M();if(a&&a.col==d.col&&!j(a)){var c=r(d),e=r(a);b=[c,E(n(c),o("slotMinutes")),
e,E(n(e),o("slotMinutes"))].sort(Ya);t(b[0],b[3])}else b=null},a);h(document).one("mouseup",function(a){na.stop();b&&(+b[0]==+b[1]&&v(b[0],!1,a),s(b[0],b[3],!1,a))})}}function v(a,b,d){x("dayClick",D[g(a.getDay())],a,b,d)}var k=this;k.renderAgenda=function(b){K=b;sa=o("theme")?"ui":"fc";da=o("weekends")?0:1;ca=o("firstDay");(ea=o("isRTL"))?(ga=-1,ha=K-1):(ga=1,ha=0);ka=Ea(o("minTime"));U=Ea(o("maxTime"));fa=o("columnFormat");if(Q)C();else{var b=sa+"-widget-header",d=sa+"-widget-content",c,f,g,i,j,
r=0==o("slotMinutes")%15;c="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+b+"'>&nbsp;</th>";for(f=0;f<K;f++)c+="<th class='fc- fc-col"+f+" "+b+"'/>";c+="<th class='fc-agenda-gutter "+b+"'>&nbsp;</th></tr></thead><tbody><tr><th class='fc-agenda-axis "+b+"'>&nbsp;</th>";for(f=0;f<K;f++)c+="<td class='fc- fc-col"+f+" "+d+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";Q=h(c+
("<td class='fc-agenda-gutter "+d+"'>&nbsp;</td></tr></tbody></table>")).appendTo(a);F=Q.find("thead");u=F.find("th").slice(1,-1);A=Q.find("tbody");D=A.find("td").slice(0,-1);W=D.find("div.fc-day-content div");N=D.eq(0);G=N.find("> div");va(F.add(F.find("tr")));va(A.add(A.find("tr")));la=F.find("th:first");ma=Q.find(".fc-agenda-gutter");y=h("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(a);o("allDaySlot")?(R=h("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(y),
c="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+b+" fc-agenda-axis'>"+o("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+b+" fc-agenda-gutter'>&nbsp;</th></tr></table>",L=h(c).appendTo(y),V=L.find("tr"),V.find("td").click(e).mousedown(T),la=la.add(L.find("th:first")),ma=ma.add(L.find("th.fc-agenda-gutter")),y.append("<div class='fc-agenda-divider "+b+"'><div class='fc-agenda-divider-inner'/></div>")):
R=h([]);P=h("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(y);aa=h("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(P);ab=h("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(aa);c="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";g=Sa();i=E(n(g),U);E(g,ka);for(f=Oa=0;g<i;f++)j=g.getMinutes(),c+="<tr class='fc-slot"+f+" "+(!j?"":"fc-minor")+"'><th class='fc-agenda-axis "+b+"'>"+(!r||!j?O(g,
o("axisFormat")):"&nbsp;")+"</th><td class='"+d+"'><div style='position:relative'>&nbsp;</div></td></tr>",E(g,o("slotMinutes")),Oa++;ja=h(c+"</tbody></table>").appendTo(aa);bb=ja.find("div:first");ja.find("td").click(e).mousedown(p);la=la.add(ja.find("th:first"))}g=ia(new Date);for(b=0;b<K;b++)f=m(b),d=u.eq(b),d.html(O(f,fa)),c=D.eq(b),+f==+g?c.addClass(sa+"-state-highlight fc-today"):c.removeClass(sa+"-state-highlight fc-today"),La(d.add(c),f)};k.setWidth=function(a){cb=a;Z.clear();X=0;ra(la.width("").each(function(a,
b){X=Math.max(X,h(b).outerWidth())}),X);a=P[0].clientWidth;(Na=P.width()-a)?(ra(ma,Na),ma.show().prev().removeClass("fc-last")):ma.hide().prev().addClass("fc-last");wa=Math.floor((a-X)/K);ra(u.slice(0,-1),wa)};k.setHeight=function(a,b){a===w&&(a=B);B=a;Pa={};var c=A.position().top,d=P.position().top,e=Math.min(a-c,ja.height()+d+1);G.height(e-oa(N));y.css("top",c);P.height(e-d-1);S=bb.height()+1;if(b){c=function(){P.scrollTop(f)};d=Sa();e=n(d);e.setHours(o("firstHour"));var f=l(d,e)+1;c();setTimeout(c,
0)}};k.beforeHide=function(){db=P.scrollTop()};k.afterShow=function(){P.scrollTop(db)};k.defaultEventEnd=function(a){var b=n(a.start);return a.allDay?b:E(b,o("defaultEventMinutes"))};k.timePosition=l;k.dayOfWeekCol=g;k.dateCell=function(a){return{row:Math.floor($(a,k.visStart)/7),col:g(a.getDay())}};k.cellDate=r;k.cellIsAllDay=j;k.allDayRow=function(){return V};k.allDayBounds=function(){return{left:X,right:cb-Na}};k.getHoverListener=function(){return na};k.colContentLeft=function(a){return Z.left(a)};
k.colContentRight=function(a){return Z.right(a)};k.getDaySegmentContainer=function(){return R};k.getSlotSegmentContainer=function(){return ab};k.getMinMinute=function(){return ka};k.getMaxMinute=function(){return U};k.getBodyContent=function(){return aa};k.getRowCnt=function(){return 1};k.getColCnt=function(){return K};k.getColWidth=function(){return wa};k.getSlotHeight=function(){return S};k.defaultSelectionEnd=function(a,b){return b?n(a):E(n(a),o("slotMinutes"))};k.renderDayOverlay=c;k.renderSelection=
function(a,b,d){d?o("allDaySlot")&&c(a,q(n(b),1),!0):t(a,b)};k.clearSelection=M;k.reportDayClick=v;k.dragStart=function(a,b){na.start(function(a){z();if(a)if(j(a))f(a.row,a.col,a.row,a.col);else{var a=r(a),b=E(n(a),o("defaultEventMinutes"));i(a,b)}},b)};k.dragStop=function(a,b,c){var d=na.stop();z();d&&x("drop",a,r(d),j(d),b,c)};eb.call(k,a,b,d);fb.call(k);gb.call(k);wb.call(k);var o=k.opt,x=k.trigger,C=k.clearEvents,J=k.renderOverlay,z=k.clearOverlays,s=k.reportSelection,I=k.unselect,T=k.daySelectionMousedown,
H=k.slotSegHtml,O=b.formatDate,Q,F,u,A,D,W,N,G,y,R,L,V,P,aa,ab,ja,bb,la,ma,ba,cb,B,X,wa,Na,S,db,K,Oa,Y,na,Z,Pa={},sa,ca,da,ea,ga,ha,ka,U,fa;Ka(a.addClass("fc-agenda"));Y=new hb(function(a,b){var c,d,e;u.each(function(a,f){c=h(f);d=c.offset().left;a&&(e[1]=d);e=[d];b[a]=e});e[1]=d+c.outerWidth();o("allDaySlot")&&(c=V,d=c.offset().top,a[0]=[d,d+c.outerHeight()]);for(var f=aa.offset().top,g=P.offset().top,i=g+P.outerHeight(),j=0;j<Oa;j++)a.push([Math.max(g,Math.min(i,f+S*j)),Math.max(g,Math.min(i,f+
S*(j+1)))])});na=new ib(Y);Z=new jb(function(a){return W.eq(a)})}function wb(){function a(a){var a=Ga(Fa(a,h.map(a,qa),c.visStart,c.visEnd)),b,d=a.length,e,f,g,i=[];for(b=0;b<d;b++){e=a[b];for(f=0;f<e.length;f++)g=e[f],g.row=0,g.level=b,i.push(g)}return i}function b(a){return a.end?n(a.end):E(n(a.start),f("defaultEventMinutes"))}function d(a,b){var c="<",d=a.url,e=$a(a,f),g=e?" style='"+e+"'":"",i=["fc-event","fc-event-skin","fc-event-vert"];r(a)&&i.push("fc-event-draggable");b.isStart&&i.push("fc-corner-top");
b.isEnd&&i.push("fc-corner-bottom");i=i.concat(a.className);a.source&&(i=i.concat(a.source.className||[]));c=d?c+("a href='"+U(a.url)+"'"):c+"div";c+=" class='"+i.join(" ")+"' style='position:absolute;z-index:8;top:"+b.top+"px;left:"+b.left+"px;"+e+"'><div class='fc-event-inner fc-event-skin'"+g+"><div class='fc-event-head fc-event-skin'"+g+"><div class='fc-event-time'>"+U(L(a.start,a.end,f("timeFormat")))+"</div></div><div class='fc-event-content'><div class='fc-event-title'>"+U(a.title)+"</div></div><div class='fc-event-bg'></div></div>";
b.isEnd&&m(a)&&(c+="<div class='ui-resizable-handle ui-resizable-s'>=</div>");return c+("</"+(d?"a":"div")+">")}function e(a,b,c){var d=b.find("div.fc-event-time");if(r(a)){var e=function(b){var c=E(n(a.start),b),e;a.end&&(e=E(n(a.end),b));d.text(L(c,e,f("timeFormat")))},g=function(){x&&(d.css("display",""),b.draggable("option","grid",[z,y]),x=!1)},h,x=!1,l,s,C,o=f("isRTL")?-1:1,p=k(),v=T(),z=H(),y=O();b.draggable({zIndex:9,scroll:!1,grid:[z,y],axis:1==v?"y":!1,opacity:f("dragOpacity"),revertDuration:f("dragRevertDuration"),
start:function(c,e){i("eventDragStart",b,a,c,e);A(a,b);h=b.position();s=C=0;p.start(function(c,e,i,h){b.draggable("option","revert",!c);G();c&&(l=h*o,f("allDaySlot")&&!c.row?(x||(x=!0,d.hide(),b.draggable("option","grid",null)),N(q(n(a.start),l),q(qa(a),l))):g())},c,"drag")},drag:function(a,b){s=Math.round((b.position.top-h.top)/y)*f("slotMinutes");s!=C&&(x||e(s),C=s)},stop:function(c,d){var f=p.stop();G();i("eventDragStop",b,a,c,d);f&&(l||s||x)?D(this,a,l,x?0:s,x,c,d):(g(),b.css("filter",""),b.css(h),
e(0),u(a,b))}})}if(c.isEnd&&m(a)){var J,R,w=O();b.resizable({handles:{s:"div.ui-resizable-s"},grid:w,start:function(c,d){J=R=0;A(a,b);b.css("z-index",9);i("eventResizeStart",this,a,c,d)},resize:function(c,e){J=Math.round((Math.max(w,b.height())-e.originalSize.height)/w);J!=R&&(d.text(L(a.start,!J&&!a.end?null:E(j(a),f("slotMinutes")*J),f("timeFormat"))),R=J)},stop:function(c,d){i("eventResizeStop",this,a,c,d);J?W(this,a,0,f("slotMinutes")*J,c,d):(b.css("z-index",8),u(a,b))}})}t(a,b)}var c=this;c.renderEvents=
function(j,m){g(j);var r,l=j.length,k=[],L=[];for(r=0;r<l;r++)j[r].allDay?k.push(j[r]):L.push(j[r]);f("allDaySlot")&&(s(a(k),m),M());var l=T(),k=x(),N=o(),p=E(n(c.visStart),k),y=h.map(L,b),G,B,t,u,A,S;r=[];for(G=0;G<l;G++){t=B=Ga(Fa(L,y,p,E(n(p),N-k)));var I=S=A=u=void 0,K=void 0,D=void 0;for(u=t.length-1;0<u;u--){I=t[u];for(A=0;A<I.length;A++){K=I[A];for(S=0;S<t[u-1].length;S++)D=t[u-1][S],K.end>D.start&&K.start<D.end&&(D.forward=Math.max(D.forward||0,(K.forward||0)+1))}}for(t=0;t<B.length;t++){u=
B[t];for(A=0;A<u.length;A++)S=u[A],S.col=G,S.level=t,r.push(S)}q(p,1,!0)}var L=r.length,Y,O,Z;B="";N={};p={};G=v();l=T();f("readyState");(t=f("isRTL"))?(u=-1,I=l-1):(u=1,I=0);for(l=0;l<L;l++)k=r[l],y=k.event,A=C(k.start,k.start),S=C(k.start,k.end),Y=k.col,K=k.level,D=k.forward||0,O=J(Y*u+I),Z=z(Y*u+I)-O,Z=Math.min(Z-6,0.95*Z),Y=K?Z/(K+D+1):D?2*(Z/(D+1)-6):Z,K=O+Z/(K+D+1)*K*u+(t?Z-Y:0),k.top=A,k.left=K,k.outerWidth=Y,k.outerHeight=S-A,B+=d(y,k);G[0].innerHTML=B;t=G.children();for(l=0;l<L;l++)k=r[l],
y=k.event,B=h(t[l]),u=i("eventRender",y,y,B),!1===u?B.remove():(u&&!0!==u&&(B.remove(),B=h(u).css({position:"absolute",top:k.top,left:k.left}).appendTo(G)),k.element=B,y._id===m?e(y,B,k):B[0]._fci=l,F(y,B));Va(G,r,e);for(l=0;l<L;l++)if(k=r[l],B=k.element)G=N[y=k.key=Za(B[0])],k.vsides=G===w?N[y]=oa(B,!0):G,G=p[y],k.hsides=G===w?p[y]=Ha(B)+Ia(B)+Ja(B):G,y=B.find("div.fc-event-content"),y.length&&(k.contentTop=y[0].offsetTop);for(l=0;l<L;l++)if(k=r[l],B=k.element)B[0].style.width=Math.max(0,k.outerWidth-
k.hsides)+"px",N=Math.max(0,k.outerHeight-k.vsides),B[0].style.height=N+"px",y=k.event,k.contentTop!==w&&10>N-k.contentTop&&(B.find("div.fc-event-time").text(R(y.start,f("timeFormat"))+" - "+y.title),B.find("div.fc-event-title").remove()),i("eventAfterRender",y,y,B);i("readyState")};c.compileDaySegs=a;c.clearEvents=function(){l();p().empty();v().empty()};c.slotSegHtml=d;c.bindDaySeg=function(a,b,c){if(r(a)){var d=c.isStart,e=function(){j||(b.width(g).height("").draggable("option","grid",null),j=!0)},
g,h,j=!0,l,y=f("isRTL")?-1:1,s=k(),L=H(),p=O(),C=x();b.draggable({zIndex:9,opacity:f("dragOpacity","month"),revertDuration:f("dragRevertDuration"),start:function(c,k){i("eventDragStart",b,a,c,k);A(a,b);g=b.width();s.start(function(c,g,i,k){G();c?(h=!1,l=k*y,c.row?d?j&&(b.width(L-10),Wa(b,p*Math.round((a.end?(a.end-a.start)/xb:f("defaultEventMinutes"))/f("slotMinutes"))),b.draggable("option","grid",[L,1]),j=!1):h=!0:(N(q(n(a.start),l),q(qa(a),l)),e()),h=h||j&&!l):(e(),h=!0);b.draggable("option","revert",
h)},c,"drag")},stop:function(c,d){s.stop();G();i("eventDragStop",b,a,c,d);if(h)e(),b.css("filter",""),u(a,b);else{var g=0;j||(g=Math.round((b.offset().top-Q().offset().top)/p)*f("slotMinutes")+C-(60*a.start.getHours()+a.start.getMinutes()));D(this,a,l,g,j,c,d)}}})}c.isEnd&&m(a)&&I(a,b,c);t(a,b)};kb.call(c);var f=c.opt,i=c.trigger,r=c.isEventDraggable,m=c.isEventResizable,j=c.eventEnd,g=c.reportEvents,l=c.reportEventClear,t=c.eventElementHandlers,M=c.setHeight,p=c.getDaySegmentContainer,v=c.getSlotSegmentContainer,
k=c.getHoverListener,o=c.getMaxMinute,x=c.getMinMinute,C=c.timePosition,J=c.colContentLeft,z=c.colContentRight,s=c.renderDaySegs,I=c.resizableDayEvent,T=c.getColCnt,H=c.getColWidth,O=c.getSlotHeight,Q=c.getBodyContent,F=c.reportEventElement,u=c.showEvents,A=c.hideEvents,D=c.eventDrop,W=c.eventResize,N=c.renderDayOverlay,G=c.clearOverlays,y=c.calendar,R=y.formatDate,L=y.formatDates}function eb(a,b,d){function e(a,b){var c=o[a];return"object"==typeof c?Ba(c,b||d):c}function c(a,c){return b.trigger.apply(b,
[a,c||g].concat(Array.prototype.slice.call(arguments,2),[g]))}function f(a){return fa(a.editable,(a.source||{}).editable,e("editable"))}function i(a){return a.end?n(a.end):l(a)}function r(a,b,c){var a=k[a._id],d,e=a.length;for(d=0;d<e;d++)if(!b||a[d][0]!=b[0])a[d][c]()}function m(a,b,c,d){for(var c=c||0,e,f=a.length,g=0;g<f;g++)e=a[g],d!==w&&(e.allDay=d),E(q(e.start,b,!0),c),e.end&&(e.end=E(q(e.end,b,!0),c)),t(e,o)}function j(a,b,c){for(var c=c||0,d,e=a.length,f=0;f<e;f++)d=a[f],d.end=E(q(i(d),b,
!0),c),t(d,o)}var g=this;g.element=a;g.calendar=b;g.name=d;g.opt=e;g.trigger=c;g.isEventDraggable=function(a){return f(a)&&!e("disableDragging")};g.isEventResizable=function(a){return f(a)&&!e("disableResizing")};g.reportEvents=function(a){p={};var b,c=a.length,d;for(b=0;b<c;b++)d=a[b],p[d._id]?p[d._id].push(d):p[d._id]=[d]};g.eventEnd=i;g.reportEventElement=function(a,b){v.push(b);k[a._id]?k[a._id].push(b):k[a._id]=[b]};g.reportEventClear=function(){v=[];k={}};g.eventElementHandlers=function(a,b){b.mouseup(function(d){2==
d.button&&(c("dayClick",this,a.start,!0,d),h(b).bind("contextmenu",function(){return!1}))}).click(function(d){if(!b.hasClass("ui-draggable-dragging")&&!b.hasClass("ui-resizable-resizing"))return c("eventClick",this,a,d)}).hover(function(b){c("eventMouseover",this,a,b)},function(b){c("eventMouseout",this,a,b)})};g.showEvents=function(a,b){r(a,b,"show")};g.hideEvents=function(a,b){r(a,b,"hide")};g.eventDrop=function(a,b,d,e,f,g,i){var h=b.allDay,j=b._id;m(p[j],d,e,f);c("eventDrop",a,b,d,e,f,function(){m(p[j],
-d,-e,h);M(j)},g,i);M(j)};g.eventResize=function(a,b,d,e,f,g){var i=b._id;j(p[i],d,e);c("eventResize",a,b,d,e,function(){j(p[i],-d,-e);M(i)},f,g);M(i)};var l=g.defaultEventEnd,t=b.normalizeEvent,M=b.reportEventChange,p={},v=[],k={},o=b.options}function kb(){function a(a){var b=j("isRTL"),c,d=a.length,e,f,g,i;c=z();var h=c.left,k=c.right,r,m,n,p,q,o="";for(c=0;c<d;c++)e=a[c],f=e.event,i=["fc-event","fc-event-skin","fc-event-hori"],l(f)&&i.push("fc-event-draggable"),b?(e.isStart&&i.push("fc-corner-right"),
e.isEnd&&i.push("fc-corner-left"),r=H(e.end.getDay()-1),m=H(e.start.getDay()),n=e.isEnd?s(r):h,p=e.isStart?I(m):k):(e.isStart&&i.push("fc-corner-left"),e.isEnd&&i.push("fc-corner-right"),r=H(e.start.getDay()),m=H(e.end.getDay()-1),n=e.isStart?s(r):h,p=e.isEnd?I(m):k),i=i.concat(f.className),f.source&&(i=i.concat(f.source.className||[])),g=f.url,q=$a(f,j),o=g?o+("<a href='"+U(g)+"'"):o+"<div",o+=" class='"+i.join(" ")+"' style='position:absolute;z-index:8;left:"+n+"px;"+q+"'><div class='fc-event-inner fc-event-skin'"+
(q?" style='"+q+"'":"")+">",!f.allDay&&e.isStart&&(o+="<span class='fc-event-time'>"+U(u(f.start,f.end,j("timeFormat")))+"</span>"),o+="<span class='fc-event-title'>"+U(f.title)+"</span></div>",e.isEnd&&t(f)&&(o+="<div class='ui-resizable-handle ui-resizable-"+(b?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),o+="</"+(g?"a":"div")+">",e.left=n,e.outerWidth=p-n,e.startCol=r,e.endCol=m+1;return o}function b(a,b){var c,d=a.length,e,f,i;for(c=0;c<d;c++)e=a[c],f=e.event,i=h(b[c]),f=g("eventRender",f,f,i),!1===
f?i.remove():(f&&!0!==f&&(f=h(f).css({position:"absolute",left:e.left}),i.replaceWith(f),i=f),e.element=i)}function d(a){var b,c=a.length,d,e,f,g,i={};for(b=0;b<c;b++)if(d=a[b],e=d.element)f=d.key=Za(e[0]),g=i[f],g===w&&(g=i[f]=Ha(e)+Ia(e)+Ja(e)),d.hsides=g}function e(a){var b,c=a.length,d,e;for(b=0;b<c;b++)if(d=a[b],e=d.element)e[0].style.width=Math.max(0,d.outerWidth-d.hsides)+"px"}function c(a){var b,c=a.length,d,e,f,g,i={};for(b=0;b<c;b++)if(d=a[b],e=d.element)f=d.key,g=i[f],g===w&&(g=i[f]=Xa(e)),
d.outerHeight=e[0].offsetHeight+g}function f(){var a,b=x(),c=[];for(a=0;a<b;a++)c[a]=E(a).find("td:first div.fc-day-content > div");return c}function i(a){var b,c=a.length,d=[];for(b=0;b<c;b++)d[b]=a[b][0].offsetTop;return d}function r(a,b){var c,d=a.length,e,f;for(c=0;c<d;c++)if(e=a[c],f=e.element)f[0].style.top=b[e.row]+(e.top||0)+"px",e=e.event,g("eventAfterRender",e,e,f);g("readyState")}var m=this;m.renderDaySegs=function(g,h){var j=Q(),k=x(),l=C(),m=0,n,o,q,s=g.length,v,t;j[0].innerHTML=a(g);
b(g,j.children());o=g.length;for(n=0;n<o;n++)q=g[n],(t=q.element)&&p(q.event,t);o=g.length;var u;for(n=0;n<o;n++)if(q=g[n],t=q.element)u=q.event,u._id===h?F(u,t,q):t[0]._fci=n;Va(j,g,F);d(g);e(g);c(g);j=f();for(n=0;n<k;n++){o=[];for(q=0;q<l;q++)o[q]=0;for(;m<s&&(v=g[m]).row==n;){q=o.slice(v.startCol,v.endCol);q=Math.max.apply(Math,q);v.top=q;q+=v.outerHeight;for(t=v.startCol;t<v.endCol;t++)o[t]=q;m++}j[n].height(Math.max.apply(Math,o))}r(g,i(j))};m.resizableDayEvent=function(l,p,t){var s=j("isRTL"),
u=s?"w":"e",w=p.find("div.ui-resizable-"+u),z=!1;Ka(p);p.mousedown(function(a){a.preventDefault()}).click(function(a){z&&(a.preventDefault(),a.stopImmediatePropagation())});w.mousedown(function(j){function w(a){g("eventResizeStop",this,l,a);h("body").css("cursor","");E.stop();D();B&&o(this,l,B,0,a);setTimeout(function(){z=!1},0)}if(1==j.which){z=!0;var E=m.getHoverListener(),F=x(),J=C(),H=s?-1:1,I=s?J-1:0,V=p.css("top"),B,X,T=h.extend({},l),U=W(l.start);$();h("body").css("cursor",u+"-resize").one("mouseup",
w);g("eventResizeStart",this,l,j);E.start(function(g,j){if(g){var m=Math.max(U.row,g.row),o=g.col;1==F&&(m=0);m==U.row&&(o=s?Math.min(U.col,o):Math.max(U.col,o));B=7*m+o*H+I-(7*j.row+j.col*H+I);m=q(M(l),B,!0);if(B){T.end=m;var o=X,p=O([T]),x=t.row,w=h("<div/>"),z=Q(),C=p.length,E;w[0].innerHTML=a(p);w=w.children();z.append(w);b(p,w);d(p);e(p);c(p);r(p,i(f()));w=[];for(z=0;z<C;z++)if(E=p[z].element)p[z].row===x&&E.css("top",V),w.push(E[0]);X=h(w);X.find("*").css("cursor",u+"-resize");o&&o.remove();
k(l)}else X&&(v(l),X.remove(),X=null);D();A(l.start,q(n(m),1))}},j)}})};var j=m.opt,g=m.trigger,l=m.isEventDraggable,t=m.isEventResizable,M=m.eventEnd,p=m.reportEventElement,v=m.showEvents,k=m.hideEvents,o=m.eventResize,x=m.getRowCnt,C=m.getColCnt,E=m.allDayRow,z=m.allDayBounds,s=m.colContentLeft,I=m.colContentRight,H=m.dayOfWeekCol,W=m.dateCell,O=m.compileDaySegs,Q=m.getDaySegmentContainer,F=m.bindDaySeg,u=m.calendar.formatDates,A=m.renderDayOverlay,D=m.clearOverlays,$=m.clearSelection}function gb(){function a(a){m&&
(m=!1,r(),c("unselect",null,a))}function b(a,b,d,e){m=!0;c("select",null,a,b,d,e)}var d=this;d.select=function(c,d,e){a();d||(d=f(c,e));i(c,d,e);b(c,d,e)};d.unselect=a;d.reportSelection=b;d.daySelectionMousedown=function(c){var f=d.cellDate,m=d.cellIsAllDay,n=d.getHoverListener(),q=d.reportDayClick;if(1==c.which&&e("selectable")){a(c);var p;n.start(function(a,b){r();a&&m(a)?(p=[f(b),f(a)].sort(Ya),i(p[0],p[1],!0)):p=null},c);h(document).one("mouseup",function(a){n.stop();p&&(+p[0]==+p[1]&&q(p[0],
!0,a),b(p[0],p[1],!0,a))})}};var e=d.opt,c=d.trigger,f=d.defaultSelectionEnd,i=d.renderSelection,r=d.clearSelection,m=!1;e("selectable")&&e("unselectAuto")&&h(document).mousedown(function(b){var c=e("unselectCancel");(!c||!h(b.target).parents(c).length)&&a(b)})}function fb(){this.renderOverlay=function(d,e){var c=b.shift();c||(c=h("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));c[0].parentNode!=e[0]&&c.appendTo(e);a.push(c.css(d).show());return c};this.clearOverlays=function(){for(var d;d=
a.shift();)b.push(d.hide().unbind())};var a=[],b=[]}function hb(a){var b,d;this.build=function(){b=[];d=[];a(b,d)};this.cell=function(a,c){var f=b.length,i=d.length,h,m=-1,j=-1;for(h=0;h<f;h++)if(c>=b[h][0]&&c<b[h][1]){m=h;break}for(h=0;h<i;h++)if(a>=d[h][0]&&a<d[h][1]){j=h;break}return 0<=m&&0<=j?{row:m,col:j}:null};this.rect=function(a,c,f,i,h){h=h.offset();return{top:b[a][0]-h.top,left:d[c][0]-h.left,width:d[i][1]-d[c][0],height:b[f][1]-b[a][0]}}}function ib(a){function b(b){b=a.cell(b.pageX,b.pageY);
if(!b!=!f||b&&(b.row!=f.row||b.col!=f.col))b?(c||(c=b),e(b,c,b.row-c.row,b.col-c.col)):e(b,c),f=b}var d,e,c,f;this.start=function(i,r,m){e=i;c=f=null;a.build();b(r);d=m||"mousemove";h(document).bind(d,b)};this.stop=function(){h(document).unbind(d,b);return f}}function jb(a){var b=this,d={},e={},c={};b.left=function(b){return e[b]=e[b]===w?(d[b]=d[b]||a(b)).position().left:e[b]};b.right=function(e){return c[e]=c[e]===w?b.left(e)+(d[e]=d[e]||a(e)).width():c[e]};b.clear=function(){d={};e={};c={}}}var pa=
{defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:"January February March April May June July August September October November December".split(" "),
monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},yb={header:{left:"next,prev today",
center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},H=h.fullCalendar={version:"1.5.1"},ca=H.views={};h.fn.fullCalendar=function(a){if("string"==typeof a){var b=Array.prototype.slice.call(arguments,1),d;this.each(function(){var c=h.data(this,"fullCalendar");c&&h.isFunction(c[a])&&(c=c[a].apply(c,b),d===w&&(d=c),"destroy"==a&&h.removeData(this,
"fullCalendar"))});return d!==w?d:this}var e=a.eventSources||[];delete a.eventSources;a.events&&(e.push(a.events),delete a.events);a=h.extend(!0,{},pa,a.isRTL||a.isRTL===w&&pa.isRTL?yb:{},a);this.each(function(b,d){var i=h(d),r=new mb(i,a,e);i.data("fullCalendar",r);r.render()});return this};H.sourceNormalizers=[];H.sourceFetchers=[];var pb={dataType:"json",cache:!1},qb=1;H.addDays=q;H.cloneDate=n;H.parseDate=Ca;H.parseISO8601=Ua;H.parseTime=Ea;H.formatDate=da;H.formatDates=Aa;var ub="sun mon tue wed thu fri sat".split(" "),
Ta=864E5,rb=36E5,xb=6E4,sb={s:function(a){return a.getSeconds()},ss:function(a){return ea(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return ea(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return ea(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return ea(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return ea(a.getDate())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},dddd:function(a,b){return b.dayNames[a.getDay()]},
M:function(a){return a.getMonth()+1},MM:function(a){return ea(a.getMonth()+1)},MMM:function(a,b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return 12>a.getHours()?"a":"p"},tt:function(a){return 12>a.getHours()?"am":"pm"},T:function(a){return 12>a.getHours()?"A":"P"},TT:function(a){return 12>a.getHours()?"AM":"PM"},u:function(a){return da(a,
"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();return 10<a&&20>a?"th":["st","nd","rd"][a%10-1]||"th"}};H.applyAll=ua;ca.month=function(a,b){var d=this;d.render=function(a,b){b&&(za(a,b),a.setDate(1));var h=n(a,!0);h.setDate(1);var j=za(n(h),1),g=n(h),l=n(j),t=e("firstDay"),w=e("weekends")?0:1;w&&(W(g),W(l,-1,!0));q(g,-((g.getDay()-Math.max(t,w)+7)%7));q(l,(7-l.getDay()+Math.max(t,w))%7);t=Math.round((l-g)/(7*Ta));"fixed"==e("weekMode")&&(q(l,7*(6-t)),t=6);d.title=f(h,e("titleFormat"));d.start=
h;d.end=j;d.visStart=g;d.visEnd=l;c(6,t,w?5:7,!0)};Ma.call(d,a,b,"month");var e=d.opt,c=d.renderBasic,f=b.formatDate};ca.basicWeek=function(a,b){var d=this;d.render=function(a,b){b&&q(a,7*b);var h=q(n(a),-((a.getDay()-e("firstDay")+7)%7)),j=q(n(h),7),g=n(h),l=n(j),t=e("weekends");t||(W(g),W(l,-1,!0));d.title=f(g,q(n(l),-1),e("titleFormat"));d.start=h;d.end=j;d.visStart=g;d.visEnd=l;c(1,1,t?7:5,!1)};Ma.call(d,a,b,"basicWeek");var e=d.opt,c=d.renderBasic,f=b.formatDates};ca.basicDay=function(a,b){var d=
this;d.render=function(a,b){b&&(q(a,b),e("weekends")||W(a,0>b?-1:1));d.title=f(a,e("titleFormat"));d.start=d.visStart=n(a,!0);d.end=d.visEnd=q(n(d.start),1);c(1,1,1,!1)};Ma.call(d,a,b,"basicDay");var e=d.opt,c=d.renderBasic,f=b.formatDate};h.extend(!0,pa,{weekMode:"fixed"});ca.agendaWeek=function(a,b){var d=this;d.render=function(a,b){b&&q(a,7*b);var h=q(n(a),-((a.getDay()-e("firstDay")+7)%7)),j=q(n(h),7),g=n(h),l=n(j),t=e("weekends");t||(W(g),W(l,-1,!0));d.title=f(g,q(n(l),-1),e("titleFormat"));
d.start=h;d.end=j;d.visStart=g;d.visEnd=l;c(t?7:5)};lb.call(d,a,b,"agendaWeek");var e=d.opt,c=d.renderAgenda,f=b.formatDates};ca.agendaDay=function(a,b){var d=this;d.render=function(a,b){b&&(q(a,b),e("weekends")||W(a,0>b?-1:1));var h=n(a,!0),j=q(n(h),1);d.title=f(a,e("titleFormat"));d.start=d.visStart=h;d.end=d.visEnd=j;c(1)};lb.call(d,a,b,"agendaDay");var e=d.opt,c=d.renderAgenda,f=b.formatDate};h.extend(!0,pa,{allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,
axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,maxTime:24})})(jQuery);